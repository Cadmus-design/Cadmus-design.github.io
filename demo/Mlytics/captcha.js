var option={vid:"5edda4adb8c19be33e281050",type:"click",lang:"auto",container:"#vaptchaContainer",offline_server:"http://localhost.dev"};function submit(token){let result=parseQuery('<!--# echo var="request_uri"-->');let userArgs=result[0];let mlyArgs=result[1];let route=result[2];let uri=assignQuery(userArgs,mlyArgs,route,token);window.location.href=window.location.protocol+'//'+window.location.hostname+uri;function parseQuery(originUri){let mlyKeys=['mlychl_jwt','vaptcha_token'];let userArgs=[];let mlyArgs=[];let tempList=originUri.split('?');let route=tempList[0];let query=tempList[1]?tempList[1].replace(/&amp;/g,'&'):'';let argList=query.split('&').filter(function(item){return item!==''});let length=55;for(let i=0;i<argList.length;i++){let pair=argList[i].split('=');if(!(mlyKeys.indexOf(pair[0])>-1)){length+=pair[0].length;if(pair[1]==undefined){userArgs.push(pair[0])}else{userArgs.push({name:pair[0],value:pair[1],normal:true})}}}return [userArgs,mlyArgs,route];}function assignQuery(userArgs,mlyArgs,route,token){if(userArgs.length>0||mlyArgs.length>0){let qs='?';for(let i=0;i<userArgs.length;i++){let item=userArgs[i];if(item.normal){qs+=item.name+'='+item.value+'&';}else{qs+=item+'&';}}for(let i=0;i<mlyArgs.length;i++){let item=mlyArgs[i];qs+=item.name+'='+item.value+'&';}qs+='vaptcha_token='+token;return route+qs;}else{return route+'?vaptcha_token='+token;}}}function selectLang(){var lang=document.getElementById("lang").value;if(!option.lang){option.lang='zh-CN';}window.vaptcha(option).then(function(vaptchaObj){vaptchaObj.listen("pass",function(){let token=vaptchaObj.getToken();submit(token);});vaptchaObj.render();});document.querySelectorAll("*[lang]").forEach(function(e){e.style.display="none";});document.querySelectorAll("*[lang="+lang+"]").forEach(function(e){e.style.display="block";});}window.onload=function(){var e=document.getElementById("lang");let lang=window.navigator.language.replace(/-w+/,"").toLowerCase();switch(lang){case "zh-cn":e.value="zh-CN";break;case "zh-hk":case "zh-tw":e.value="zh-TW";break;case "vi":e.value="vi-VN";break;default:e.value=lang.includes("en")?"en":"en";break;}selectLang()}